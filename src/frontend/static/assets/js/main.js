// Generated by CoffeeScript 1.6.3
(function() {
  var bindFunctions, indentImages, onImageMouseOut, onImageMouseOver, searchDataArrived,
    _this = this;

  this.newSearch = function() {
    var searchterm;
    searchterm = $('#input-searchterm').val();
    $('#loading-popup-searchterm').text(searchterm);
    $('#loading-popup').modal('show');
    return $('#result-container').load("http://localhost:5000/search/" + searchterm + " #result-container", searchDataArrived);
  };

  searchDataArrived = function(responseText, textStatus, XMLHttpRequest) {
    $('#loading-popup').modal('hide');
    console.log("Search data arrived:", textStatus);
    return indentImages();
  };

  this.onNodeClick = function(nodeObject) {
    return console.log("Clicked on node: " + nodeObject.textContent);
  };

  onImageMouseOver = function(imageObject) {
    return console.log("Hover onto image: " + imageObject.href.baseVal);
  };

  onImageMouseOut = function(imageObject) {
    return console.log("Hover out of image: " + imageObject.href.baseVal);
  };

  bindFunctions = function() {
    return $('#input-searchterm').keyup(function(e) {
      if (e.keyCode === 13) {
        return newSearch();
      }
    });
  };

  indentImages = function() {
    var max_width;
    max_width = 0;
    $('.result-name').each(function() {
      if ($(this).width() > max_width) {
        return max_width = $(this).width();
      }
    });
    return $('.result-name').width(max_width);
  };

  $.ready = function() {
    $('#loading-popup').modal('hide');
    return $("#input-searchterm").focus();
  };

}).call(this);
