<html>
  <head>
    <title>Semantic Multimedia â€“ Flickr Clusterer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% assets output="gen/bootstrap-amilia.css",
          "assets/css/bootstrap-amilia.css" %}
      <link href="{{ ASSET_URL }}" rel="stylesheet" media="screen">
    {% endassets %}

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>

    {% assets output="gen/main.js",
          "assets/js/bootstrap.js", "assets/js/main.js" %}
      <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}

    <style>
      body {
        padding-top: 60px;
      }

      .navbar-inner {
        min-height: 50px;
      }

      #loading-progress {
        margin-bottom: 0;
      }

      #input-searchterm {
        margin: 2px;
        height: 27px;
      }

      #input-searchbutton {
        margin: 2px;
        width: 60px;
      }

      .result-synset {
        padding-left: 30px;
        overflow: hidden;
      }

      .result-synset:nth-child(odd) {
        background-color: #1cafbd;
      }


      .result-synset:nth-child(even) {
        background-color: #1ebccb;
      }

      .result-preview {
        white-space: nowrap;
      }

      .result-preview > img {
        height: 100px;
      }
    </style>
  </head>
  <body>
    <div class="overlay"></div>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Flickr Clusterer</a>
          <div class="nav-collapse collapse" id="main-menu">
            <form class="navbar-search pull-right" action="">
              <input type="text" id="input-searchterm" class="span5" placeholder="enter searchterm...">
              <a id="input-searchbutton" class="btn btn-inverse" href="#" onclick="newSearch()">find</a>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div id="result-container">
        {%- for synset in tree recursive %}
          <div class="result-synset">
            <div class="result-name pull-left">{{ synset.name }}</div>
            <div class="result-preview pull-left">
              {%- for mcl_cluster in synset.subclusters %}
                {% set mcl_loop = loop %}
                {%- for visual_cluster in mcl_cluster %}
                  {% set visual_loop = loop %}
                  {%- for _, image_url in visual_cluster %}
                    <img src="{{ image_url }}"
                         data-mcl-cluster="{{ mcl_loop.index }}"
                         data-visual-cluster="{{ visual_loop.index }}"/>
                  {%- endfor %}
                {%- endfor %}
              {%- endfor %}
            </div>
            <div class="clearfix"></div>
            {%- if synset.hyponyms -%}
              {{ loop(synset.hyponyms) }}
            {%- endif %}
            {%- if synset.meronyms -%}
              {{ loop(synset.meronyms) }}
            {%- endif %}
          </div>
        {%- endfor %}
      </div>
    </div>
    <div id="loading-popup" class="overlay-popup modal hide fade" data-backdrop="static" data-keyboard="false">
      <div class="modal-header">
        <h3>Loading data for &quot;<em id="loading-popup-searchterm">...</em>&quot;</h3>
      </div>
      <div class="modal-footer">
        <div id="loading-progress" class="progress progress-info progress-striped active">
          <div class="bar" style="width: 100%;"></div>
        </div>
      </div>
    </div>
  </body>
</html>